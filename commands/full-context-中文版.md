你正在当前项目中工作。在处理用户请求 "$ARGUMENTS" 之前，你需要使用自适应子代理策略智能地收集相关项目上下文。

## 自动加载的项目上下文：
@/CLAUDE.md
@/docs/ai-context/project-structure.md
@/docs/ai-context/docs-overview.md

## 步骤 1：智能分析策略决策
基于上面自动加载的项目上下文，深入思考最佳方法。根据用户请求 "$ARGUMENTS" 和项目结构/文档概述，智能决定最佳方法：

### 策略选项：
**直接方法**（0-1 个子代理）：
- 当请求可以通过有针对性的文档阅读和直接分析高效处理时
- 关于现有代码的简单问题或直接任务

**重点调查**（2-3 个子代理）：
- 当特定区域的深度分析将有利于响应时
- 需要彻底探索的复杂单域问题或任务
- 当依赖关系和影响需要仔细评估时

**多视角分析**（3 个或更多子代理）：
- 当请求涉及多个区域、组件或技术域时
- 当全面理解需要不同的分析视角时
- 对于需要仔细依赖映射和影响评估的任务
- 根据实际复杂性扩展代理数量，而不是预定模式

## 步骤 2：自主子代理设计

### 对于子代理方法：
你完全可以基于以下因素自由设计子代理任务：
- **发现的项目结构**来自自动加载的 `/docs/ai-context/project-structure.md` 文件树
- **文档架构**来自自动加载的 `/docs/ai-context/docs-overview.md`
- **特定用户请求要求**
- **你的评估**关于什么调查方法最有效

**关键：使用子代理时，始终使用单个消息的多个 Task 工具调用并行启动它们。永远不要顺序启动。**

### 子代理自主性原则：
- **自定义专业化**：根据特定请求和项目结构定义代理重点区域
- **灵活范围**：代理可以分析文档、代码文件和架构模式的任何组合
- **自适应覆盖**：确保用户请求的所有相关方面都被覆盖而没有重叠
- **文档 + 代码**：每个代理应该阅读相关文档文件并检查实际实现代码
- **依赖映射**：对于涉及代码更改的任务，分析导入/导出关系并识别所有将受影响的文件
- **影响评估**：考虑对代码库的连锁反应，包括测试、配置和相关组件
- **模式合规性**：确保解决方案遵循现有项目的命名、结构和架构约定
- **清理规划**：对于结构性更改，识别应删除的过时代码、未使用的导入和弃用文件，以防止代码积累
- **网络研究**：考虑（可选）部署子代理进行网络搜索，当当前最佳实践、安全咨询或外部兼容性研究将增强响应时

### 子代理任务设计模板：
```
任务："分析 [SPECIFIC_COMPONENT(S)] 以实现与用户请求 '$ARGUMENTS' 相关的 [TASK_OBJECTIVE]"

标准调查工作流：
1. 审查自动加载的项目上下文（CLAUDE.md、project-structure.md、docs-overview.md）
2. （可选）为架构上下文阅读其他相关文档文件
3. 分析 [COMPONENT(S)] 中的实际代码文件以了解实现现实
4. 对于代码相关任务：映射导入/导出依赖关系并识别受影响的文件
5. 评估对测试、配置和相关组件的影响
6. 验证与项目模式和约定的对齐
7. 对于结构性更改：识别过时代码、未使用的导入和应删除的文件

从这个组件视角返回解决用户请求的全面发现，包括架构洞察、实现细节、依赖映射和安全执行的实用考虑。"
```

示例用法：
```
分析任务："分析 web-dashboard 音频处理组件以了解当前可视化能力，并识别用户关于添加波形显示请求的集成点"

实施任务："分析 agents/tutor-server 语音管道组件以优化延迟，与用户关于改善响应时间的请求相关，包括依赖映射和影响评估"

跨组件任务："分析 web-dashboard 和 tutor-server 间的 Socket.IO 集成模式，为用户关于添加实时转录的流增强请求进行规划，重点关注导入/导出更改、受影响的测试文件和弃用 socket 处理程序的清理"
```

## 步骤 3：执行和综合

### 对于子代理方法：
深入思考整合所有调查视角的发现。
1. **设计并启动自定义子代理**基于你的战略分析
2. **收集发现**来自所有成功完成的代理
3. **综合全面理解**通过结合所有视角
4. **处理部分失败**通过使用可用的代理发现
5. **创建实施计划**（对于代码更改）：包括依赖更新、受影响文件、清理任务和验证步骤
6. **执行用户请求**使用来自所有代理的集成知识

### 对于直接方法：
1. **加载相关文档和代码**基于请求分析
2. **直接进行**使用有针对性的上下文处理用户请求

## 步骤 4：考虑 MCP 服务器使用（可选）

收集上下文后，你可以为复杂技术问题利用 MCP 服务器，如自动加载的 `/CLAUDE.md` 第 4 节所指定：
- **Gemini 咨询**：复杂编程问题的深度分析
- **Context7**：外部库的最新文档

## 步骤 5：上下文摘要和实施计划

使用你选择的方法收集上下文后：
1. **提供简洁状态更新**总结发现和方法：
   - 通过你的分析发现的简要描述
   - 基于发现的计划实施策略
   - 保持信息丰富但简洁（最多 2-4 句话）

示例状态更新：
```
"分析显示语音管道使用 Socket.IO 进行实时通信，每种管道类型都有单独的端点。我将通过在 FastAPI 后端和 SvelteKit 前端扩展现有的 Socket.IO 事件处理来实施新的转录功能，遵循 Gemini Live 管道中使用的既定模式。这将需要更新 3 个导入语句并向 socket 处理程序模块添加导出。"

"发现音频处理目前使用模块化客户端架构，具有单独的录制器、处理器和流播放器组件。我将通过创建一个新组件来添加请求的音频可视化，该组件利用现有的音频流数据并与当前调试面板结构集成。实施将遵循现有组件模式，需要更新 2 个父组件以实现正确集成。"
```

2. **继续实施**使用你的全面理解处理用户请求

## 优化指导原则

- **自适应决策**：选择最适合特定用户请求的方法
- **高效资源使用**：基于实际复杂性平衡彻底性和效率
- **全面覆盖**：确保解决与用户请求相关的所有方面
- **质量综合**：有效结合发现以提供最有用的响应

这种自适应方法确保最佳上下文收集 - 从简单请求的轻量级直接分析到复杂系统级任务的全面多代理调查。

现在继续对以下内容进行智能上下文分析：$ARGUMENTS